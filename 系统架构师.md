#  海明码的编码规则

海明码（Hamming Code）是一种用于纠错和检测的线性分组编码。其编码规则如下：

### 一、基本概念

海明码通过增加若干个校验位（冗余位）到数据位中，形成纠错编码。
 编码后的码字长度满足：

$$
2^r \geq m + r + 1
$$


- $m$：数据位数
- $r$：校验位数（冗余位数）

### 二、编码规则

以数据位和校验位的位置划分：

- **位置编号**：从左到右编号为 $1, 2, 3, 4, 5, \dots$，所有编号为 $2^n$（即1、2、4、8、16…）的位置为**校验位**，其余位置为数据位。
- 数据位按顺序填入未编号为 $2^n$ 的位置。
- 每个校验位分别负责监测特定位置上的数据位。

### 三、校验位的取值方法

每个校验位的值取决于其所负责的数据位。

校验位 $P_i$ 所校验的位的位置满足以下条件：

- 将各位置的编号以二进制表示。
- 每个校验位 $P_i$（位置为 $2^{i-1}$）负责校验所有编号的二进制表示中，第 $i$ 位为1的位置，包括数据位和其他校验位（除自己之外）。

例如：

- $P_1$（位置为1）负责校验编号中二进制最低位为1的位置（如1、3、5、7、9…）。
- $P_2$（位置为2）负责校验编号中二进制第二低位为1的位置（如2、3、6、7、10、11…）。
- $P_3$（位置为4）负责校验编号中二进制第三低位为1的位置（如4、5、6、7、12、13、14、15…）。
- 依此类推。

每个校验位的值取决于它所校验的所有位的值之和（异或）：

- 若所负责的位的值之和为**偶数**（异或为0），则该校验位为0；
- 若为**奇数**（异或为1），则该校验位为1。

（注：也可反过来定义奇偶校验，但一般采用偶校验。）

### 四、编码示例

例如，数据位为1011（4位数据），计算海明码：

1. 根据公式 $2^r \geq m + r + 1$，数据位 $m=4$，计算出需 $r=3$ 个校验位（ $2^3 \geq 4+3+1$ 满足条件）。
2. 海明码的7个位置编号为：

```
位置: 1  2  3  4  5  6  7
类型: P1 P2 D1 P3 D2 D3 D4
```

将数据位1011依次填入 D1、D2、D3、D4：

```
位置: 1  2  3  4  5  6  7
      P1 P2  1 P3  0  1  1
```

1. 计算各校验位：

- $P_1$ 校验位 (1,3,5,7)：位置3=1、5=0、7=1，异或结果为 $1 \oplus 0 \oplus 1 = 0$ → **P1=0**。
- $P_2$ 校验位 (2,3,6,7)：位置3=1、6=1、7=1，异或结果为 $1 \oplus 1 \oplus 1 = 1$ → **P2=1**。
- $P_3$ 校验位 (4,5,6,7)：位置5=0、6=1、7=1，异或结果为 $0 \oplus 1 \oplus 1 = 0$ → **P3=0**。

最后的海明码：

```
位置: 1  2  3  4  5  6  7
      0  1  1  0  0  1  1
```

因此，数据1011的海明码为：**0110011**。

### 五、纠错机制

解码时，通过再次计算校验位，若校验结果不为0，可通过二进制表示的校验结果找到出错位并纠正。

------

以上即为海明码的完整编码规则与应用示例。

### 问题：

待传送的信息为1010，若采用海明校验，则奇校验规则下的海明码是？

下面我们详细地推导出奇校验规则下的海明码：

### 第一步：确定校验位数量

数据位 $m = 4$

根据公式确定校验位数 $r$：

$2^r \geq m + r + 1$

因为 $m = 4$，则：

- $r=2$， $2^2=4<4+2+1=7$，不满足；
- $r=3$， $2^3=8\geq 4+3+1=8$，满足。

因此需要3个校验位，码字长度为 $m + r = 7$。

------

### 第二步：确定数据位和校验位位置

海明码位置编号规则：

- 位置编号为 $2^n$ 的位置为校验位 (P)；
- 其他位置为数据位 (D)。

则7位海明码的位置安排：

| 位置 | 1    | 2    | 3    | 4    | 5    | 6    | 7    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 类型 | P1   | P2   | D1   | P3   | D2   | D3   | D4   |

数据位1010填入对应位置：

| 位置 | 1    | 2    | 3    | 4    | 5    | 6    | 7    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 内容 | P1   | P2   | 1    | P3   | 0    | 1    | 0    |

------

### 第三步：计算奇校验位 (P1、P2、P3)

**奇校验规则**：
 校验位与所覆盖的数据位加自身，异或后结果应为奇数，即总的“1”的个数为奇数。

- **P1**（位置1）：覆盖位置1,3,5,7
  - 数据位分别为位置3=1，位置5=0，位置7=0
  - 目前数据位中有1个1（奇数），因此为了总个数为奇数（奇校验），P1应设为 **0**。
- **P2**（位置2）：覆盖位置2,3,6,7
  - 数据位分别为位置3=1，位置6=1，位置7=0
  - 已经有2个1（偶数），为奇校验，则P2必须设为 **1**。
- **P3**（位置4）：覆盖位置4,5,6,7
  - 数据位分别为位置5=0，位置6=1，位置7=0
  - 已有1个1（奇数），因此P3应设为 **0**。

------

### 第四步：形成最终的海明码

将上述计算结果填回：

| 位置 | 1    | 2    | 3    | 4    | 5    | 6    | 7    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 内容 | 0    | 1    | 1    | 0    | 0    | 1    | 0    |

所以最终奇校验规则下的海明码为：
 **0110010**

------

### 答案：

奇校验规则下的海明码为： **0110010**

## 问题

其所负责的数据位如何确定？



每个校验位所负责的数据位位置，依据**二进制编号法**来确定。

------

## 一、编号规则（前提）

对待编码的海明码，各位置从左到右编号为：

```
位置: 1  2  3  4  5  6  7  8  9  10  11 ...
类型: P1 P2 D1 P3 D2 D3 D4 P4 D5  D6  D7 ...
```

- 其中 $2^n$ （即 1, 2, 4, 8, 16...）的位置为**校验位**。
- 其他位置为**数据位**。

------

## 二、校验位负责的数据位的确定方法

每个校验位 $P_i$ 所负责的数据位位置，满足以下规律：

- **第一步**：将位置编号用二进制表示。
- **第二步**：校验位位置是 $2^{i-1}$ 时，负责校验所有编号的二进制中第 $i$ 位（从低位开始数）为 **1** 的位置（包括校验位自身）。
- **第三步**：校验位本身虽然位置符合，但不参与自身计算。

------

## 三、举例说明（清晰易懂）

比如7位海明码：

```
位置：  1   2   3   4   5   6   7
类型： P1  P2  D1  P3  D2  D3  D4
二进制表示：
位置1 → 001（二进制）
位置2 → 010（二进制）
位置3 → 011（二进制）
位置4 → 100（二进制）
位置5 → 101（二进制）
位置6 → 110（二进制）
位置7 → 111（二进制）
```

逐个确定每个校验位负责的位：

| 校验位 | 校验位位置（二进制） | 负责位（位置编号）          |
| ------ | -------------------- | --------------------------- |
| P1     | 001                  | **1**、3、5、7（末位为1）   |
| P2     | 010                  | **2**、3、6、7（第二位为1） |
| P3     | 100                  | **4**、5、6、7（第三位为1） |

> **注意**：校验位自身位置（黑体字）不参与自身计算，但常列出以便记忆。

------

## 四、如何快速记忆

- **校验位1 (P1)**：奇数位置（1,3,5,7,9…）
- **校验位2 (P2)**：以2位为周期，取2个、跳过2个（2,3,6,7,10,11…）
- **校验位3 (P3)**：以4位为周期，取4个、跳过4个（4,5,6,7,12,13,14,15…）
- **校验位4 (P4)**：以8位为周期，取8个、跳过8个（8-15, 24-31…）
- 以此类推。

------

## 五、总结（关键点）

**每个校验位所负责的数据位的确定原则：**

- 将位置编号转为二进制。
- 每个校验位负责“自身位编号二进制中对应为1”的位。
- 自身位置虽然在内，但计算时要排除自身。

这样确定每个校验位负责的数据位，即可快速准确地进行海明码编码。